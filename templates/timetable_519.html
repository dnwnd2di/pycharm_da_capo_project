<link rel="stylesheet" href="{{ url_for('static', filename='timetable.css')}}">

{% extends "base_timetable.html" %}

{% block title %} login {% endblock %}

{% block optional_javascript %}
<style type="text/css">
    .main td,th{
        text-align: center;
    }
</style>

{% endblock %}

{% block content %}

<div class="container">
    <div class="col-md-1"></div>
    <div class="col-md-12">
        <table class ="table table-bordered " id="main">
            <tr>
                <th>519호</th>
                <th>Mon</th>
                <th>Tue</th>
                <th>Wed</th>
                <th>Thu</th>
                <th>Fri</th>
            </tr>

            {% for i in range(14)%}
            <tr>
                <th>{{Start_time[i]}}~{{End_time[i]}}</th>
                {% for j in range(5) %}
                    <td id={{counter[i][j]}} name={{i}},{{counter[i][j]}}>{{counter[i][j]}}</td>
                {% endfor %}
            </tr>
             {% endfor %}
        </table>
    </div>
    <div class="col-md-1"></div>
</div>


<script type="text/javascript">
    {% if data %}
         var obj = jQuery.parseJSON( '[{"StudentID": 123456789}]');
         var number=0;
         var collect_reservation=[];
         table_id=obj[0].StudentID;
         if (table_id == '123456789'){
            $( function() {
                    $('td').click( function() {
                        var change=$(this).attr('name');
                        if (number<2){
                            if($(this).attr('style')){
                                collect_reservation.pop();
                                number=number-1;
                                $(this).removeAttr('style');
                            }
                            else{
                                $(this).css('background', 'red')
                                number=number+1;
                                collect_reservation.push(change);
                            }
                        }
                        else{
                            if($(this).attr('style')){
                                collect_reservation.pop();
                                number=number-1;
                                $(this).removeAttr('style');
                            }
                            else{
                                $('td').removeAttr('style');
                                number=0;
                                collect_reservation=[];
                            }
                        }
                    });
            });
         }
    {% endif %}
</script>

<div class="container" align="center">
    <button type="button" class="btn btn-danger"><a onclick="WriteCookie();">예약완료</a></button>
    <script>
        function WriteCookie(){
         alert(collect_reservation);
        }
    </script>
</div>
{% endblock %}